#
# Copyright 2018 The Chromium OS Authors. All rights reserved.
#
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

audio_common: &audio_common
  main:
    $cras_root: "/etc/cras"
    $ucm_root: "/usr/share/alsa/ucm"
    $card: "kblda7219max"

    cras-config-dir: "{{$cras}}"
    ucm-suffix: "{{$ucm}}"

    $cras-source: "{{cras-config-dir}}/audio/cras-config"
    $cras-dest: "{{$cras_root}}/{{cras-config-dir}}"
    $ucm-source: "{{cras-config-dir}}/audio/ucm-config{{$ucm-source-suffix}}"
    $ucm-dest: "{{$ucm_root}}/{{$card}}.{{ucm-suffix}}"

    files:
      - source: "{{$cras-source}}/{{$card}}"
        destination: "{{$cras-dest}}/{{$card}}"
      - source: "{{$cras-source}}/dsp.ini"
        destination: "{{$cras-dest}}/dsp.ini"
      - source: "{{$ucm-source}}/HiFi"
        destination: "{{$ucm-dest}}/HiFi"
      - source: "{{$ucm-source}}/{{$card}}.conf"
        destination: "{{$ucm-dest}}/{{$card}}.{{ucm-suffix}}.conf"

common_config: &common_config
  name: "{{$device-name}}"
  brand-code: "{{$brand-code}}"
  identity:
    platform-name: "Nami"
    smbios-name-match: "Nami"
    sku-id: "{{$sku-id}}"
  firmware:
    no-firmware: True
  firmware-signing:
    key-id: "{{$key-id}}"
    signature-id: "{{$device-name}}"
  oem-id: "{{$oem-id}}"
  power: &power_common
    charging-ports: |
      CROS_USB_PD_CHARGER0 LEFT
      CROS_USB_PD_CHARGER1 RIGHT
    low-battery-shutdown-percent: "4.0"
    power-supply-full-factor: "0.94"
    suspend-to-idle: "1"
    set-wifi-transmit-power-for-tablet-mode: "1"
    $has-ambient-light-sensor: "0"
    has-ambient-light-sensor: "{{$has-ambient-light-sensor}}"
    $internal-backlight-als-steps: |-
      80.0 50.0 -1 400
      100.0 80.0 100 -1
    internal-backlight-als-steps: "{{$internal-backlight-als-steps}}"
    $internal-backlight-no-als-battery-brightness: "50.0"
    internal-backlight-no-als-battery-brightness: "{{$internal-backlight-no-als-battery-brightness}}"
    min-visible-backlight-level: "75"
    $touchpad-wakeup: "0"
    touchpad-wakeup: "{{$touchpad-wakeup}}"
    $has-keyboard-backlight: "1"
    has-keyboard-backlight: "{{$has-keyboard-backlight}}"
  thermal:
    dptf-dv: "{{$device-name}}/dptf.dv"
    files:
      - source: "{{dptf-dv}}"
        destination: "/etc/dptf/{{dptf-dv}}"
  test-label: "{{$device-name}}"

device_config: &device_config
  <<: *common_config
  audio:
    <<: *audio_common
    $cras: "common"
    $ucm: "1mic" # Default
    $ucm-source-suffix: "/{{$ucm}}"

device_specific_audio_device_config: &device_specific_audio_device_config
  <<: *common_config
  audio:
    <<: *audio_common
    $cras: "{{$device-name}}"
    $ucm: "{{$device-name}}"
    $ucm-source-suffix: ""

chromeos:
  devices:
    - $device-name: "akali"
      products:
        - $marketing-name: "TBD"
          $brand-code: "SOCA"
          $key-id: "AKALI"
          $oem-id: "1"
      skus:
        - $sku-id: 0x29e1
          config: *device_config
# TODO (EVT only, to be removed)
        - $sku-id: 0x2861
          config: *device_config
    - $device-name: "akali360"
      products:
        - $marketing-name: "TBD"
          $brand-code: "SOCA"
          $key-id: "AKALI"
          $oem-id: "1"
      skus:
        - $sku-id: 0x2be7
          config: *device_config
# TODO (EVT only, to be removed)
        - $sku-id: 0x2a67
          config: *device_config
    - $device-name: "nami"
      $has-ambient-light-sensor: "0"
      products:
        - $marketing-name: "TBD"
          $brand-code: "ZZCR"
          $key-id: "NAMI"
          $oem-id: "6"
      skus:
        - $sku-id: 0x3a7b
          config: *device_specific_audio_device_config
    - $device-name: "pantheon"
      products:
        - $marketing-name: "TBD"
          $brand-code: "CBUY"
          $key-id: "PANTHEON"
          $oem-id: "5"
      skus:
        - $sku-id: 0x3f62
          config:
            <<: *device_config
            power:
              <<: *power_common
              $has-keyboard-backlight: "0"
        - $sku-id: 0x3f63
          config: *device_config
        - $sku-id: 0x3f67
          config: *device_config
# TODO (EVT only, to be removed)
        - $sku-id: 0x3e63
          config: *device_config
# TODO (EVT only, to be removed)
        - $sku-id: 0x3e67
          config: *device_config
    - $device-name: "sona"
      products:
        - $marketing-name: "TBD"
          $brand-code: "HFRG"
# TODO (change key-id once the key is available)
          $key-id: "NAMI"
          $oem-id: "4"
      skus:
        - $sku-id: 0x3ae2
          config:
            <<: *device_config
            power:
              <<: *power_common
              $has-keyboard-backlight: "0"
        - $sku-id: 0x3ae3
          config: *device_config
    - $device-name: "syndra"
      products:
        - $marketing-name: "TBD"
          $brand-code: "GJZV"
# TODO (change key-id once the key is available)
          $key-id: "NAMI"
          $oem-id: "9"
      skus:
        - $sku-id: 0x2bc63
          config: *device_specific_audio_device_config
        - $sku-id: 0x2bc62
          config:
            <<: *device_specific_audio_device_config
            power:
              <<: *power_common
              $has-keyboard-backlight: "0"
        - $sku-id: 0x2bc61
          config: *device_specific_audio_device_config
        - $sku-id: 0x2bc60
          config:
            <<: *device_specific_audio_device_config
            power:
              <<: *power_common
              $has-keyboard-backlight: "0"
    - $device-name: "vayne"
      products:
        - $marketing-name: "TBD"
          $brand-code: "NPEC"
          $key-id: "VAYNE"
          $oem-id: "3"
      skus:
        - $sku-id: 0x3a67
          config: *device_specific_audio_device_config
# TODO (EVT only, to be removed)
        - $sku-id: 0x3a63
          config: *device_specific_audio_device_config
# TODO (EVT only, to be removed)
        - $sku-id: 0x3a7f
          config: *device_specific_audio_device_config
    - $device-name: "ekko"
      $touchpad-wakeup: "1"
      products:
        - $marketing-name: "TBD"
          $brand-code: "ZZCR"
          $key-id: "AKALI"
          $oem-id: "7"
      skus:
        - $sku-id: 0x118e3
          config: *device_specific_audio_device_config
        - $sku-id: 0x18e3
          config: *device_specific_audio_device_config
        - $sku-id: 0x118e1
          config: *device_specific_audio_device_config
        - $sku-id: 0x18e1
          config: *device_specific_audio_device_config
    - $device-name: "bard"
      $touchpad-wakeup: "1"
      products:
        - $marketing-name: "TBD"
          $brand-code: "ZZCR"
          $key-id: "AKALI"
          $oem-id: "8"
      skus:
        - $sku-id: 0x19ce3
          config: *device_specific_audio_device_config
        - $sku-id: 0x9ce3
          config: *device_specific_audio_device_config
        - $sku-id: 0x19ce1
          config: *device_specific_audio_device_config
        - $sku-id: 0x9ce1
          config: *device_specific_audio_device_config
