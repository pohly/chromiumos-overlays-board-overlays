#
# Copyright 2018 The Chromium OS Authors. All rights reserved.
#
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

unprovisioned-config: &unprovisioned_config
  name: "{{$device-name}}"
  identity:
    platform-name: "octopus"
    smbios-name-match: "{{$fw-name}}"
    sku-id: "{{$sku-id-val}}"
  firmware:
    no-firmware: True

device-config: &device_config
  <<: *unprovisioned_config
  audio:
    main:
      # If the generic 1/2/3 mic configuration is not sufficient, the device
      # should override the generic source by setting
      #   $mic_config: "5mic"
      #   $ucm_src_root: "{{$device-name}}"
      #   $ucm_extra_suffix: "{{$device-name}}"
      $cras_root: "/etc/cras"
      $mic_config: "2mic"
      $ucm_src_root: "common"
      $ucm_extra_suffix: ""
      $ucm_root: "/usr/share/alsa/ucm"
      $card: "glkda7219max"
      cras-config-dir: "{{$device-name}}"
      ucm-suffix: "{{$mic_config}}{{$ucm_extra_suffix}}"
      files:
        # Volume Curve
        - source: "{{$device-name}}/audio/cras-config/{{$card}}"
          destination: "{{$cras_root}}/{{cras-config-dir}}/{{$card}}"
        # EQ/DRC DSP configuration
        - source: "{{$device-name}}/audio/cras-config/dsp.ini"
          destination: "{{$cras_root}}/{{cras-config-dir}}/dsp.ini"
        # ALSA UCM configuration file
        - source: "{{$ucm_src_root}}/audio/ucm-config/{{$mic_config}}/{{$card}}.conf"
          destination: "{{$ucm_root}}/{{$card}}.{{ucm-suffix}}/{{$card}}.{{ucm-suffix}}.conf"
        # ALSA UCM SectionUseCase configuration (defined in UCM conf file)
        - source: "{{$ucm_src_root}}/audio/ucm-config/{{$mic_config}}/HiFi.conf"
          destination: "{{$ucm_root}}/{{$card}}.{{ucm-suffix}}/HiFi.conf"
  power:
    low-battery-shutdown-percent: "4.0"
    suspend-to-idle: "1"
    set-wifi-transmit-power-for-tablet-mode: "1"
    $touchpad-wakeup: "0"
    touchpad-wakeup: "{{$touchpad-wakeup}}"
  thermal:
    dptf-dv: "{{$device-name}}/dptf.dv"
    files:
      - source: "{{$device-name}}/thermal/dptf.dv"
        destination: "/etc/dptf/{{$device-name}}/dptf.dv"

chromeos:
  devices:
    - $device-name: "yorp"
      $fw-name: "Yorp"
      $mic_config: "1mic"
      skus:
        - $sku-id-val: 255
          config: *device_config
    - $device-name: "bip"
      $fw-name: "Bip"
      skus:
        - $sku-id-val: 255
          $card: "glkrt5682max"
          $ucm_src_root: "{{$device-name}}"
          $ucm_extra_suffix: "{{$device-name}}"
          config: *device_config
    # This is a temporary model with SKU ID - 255 which is expected to be
    # provisioned with correct SKU ID in the factory flow. And HWID verification
    # will also catch the DUT still with 255 and report error.
    - $device-name: "unprovisioned_phaser"
      skus:
        - $sku-id-val: 255
          $fw-name: "Phaser"
          config: *unprovisioned_config
    - $device-name: "phaser"
      $fw-name: "Phaser"
      $touchpad-wakeup: "1"
      $mic_config: "1mic"
      skus:
        - $sku-id-val: 1
          config: *device_config
    - $device-name: "phaser360"
      $fw-name: "Phaser"
      skus:
        - $sku-id-val: 2
          $mic_config: "1mic"
          config: *device_config
        - $sku-id-val: 3
          $mic_config: "2mic"
          config: *device_config
        - $sku-id-val: 4
          $mic_config: "2mic"
          config: *device_config
    # This is a temporary model with SKU ID - 255 which is expected to be
    # provisioned with correct SKU ID in the factory flow. And HWID verification
    # will also catch the DUT still with 255 and report error.
    - $device-name: "unprovisioned_fleex"
      skus:
        - $sku-id-val: 255
          $fw-name: "Fleex"
          config: *unprovisioned_config
    - $device-name: "fleex"
      $fw-name: "Fleex"
      $touchpad-wakeup: "1"
      $mic_config: "1mic"
      skus:
        - $sku-id-val: 1
          config: *device_config
        - $sku-id-val: 2
          config: *device_config
        - $sku-id-val: 3
          config: *device_config
    - $device-name: "grabbiter"
      $fw-name: "Fleex"
      skus:
        - $sku-id-val: 33
          $mic_config: "1mic"
          config: *device_config
        - $sku-id-val: 34
          $mic_config: "2mic"
          config: *device_config
    - $device-name: "orbatrix"
      $fw-name: "Fleex"
      $touchpad-wakeup: "1"
      $mic_config: "1mic"
      skus:
        - $sku-id-val: 65
          config: *device_config
    # This is a temporary model with SKU ID - 255 which is expected to be
    # provisioned with correct SKU ID in the factory flow. And HWID verification
    # will also catch the DUT still with 255 and report error.
    - $device-name: "unprovisioned_bobba"
      skus:
        - $sku-id-val: 255
          $fw-name: "Bobba"
          config: *unprovisioned_config
    - $device-name: "bobba"
      $fw-name: "Bobba"
      $touchpad-wakeup: "1"
      $mic_config: "1mic"
      skus:
        - $sku-id-val: 1
          config: *device_config
        - $sku-id-val: 2
          config: *device_config
        - $sku-id-val: 3
          config: *device_config
        - $sku-id-val: 4
          config: *device_config
    - $device-name: "bobba360"
      $fw-name: "Bobba"
      skus:
        - $sku-id-val: 9
          $mic_config: "2mic"
          config: *device_config
        - $sku-id-val: 10
          $mic_config: "2mic"
          config: *device_config
        - $sku-id-val: 11
          $mic_config: "1mic"
          config: *device_config
        - $sku-id-val: 12
          $mic_config: "1mic"
          config: *device_config
    - $device-name: "sparky"
      $fw-name: "Bobba"
      $touchpad-wakeup: "1"
      skus:
        - $sku-id-val: 17
          $mic_config: "2mic"
          config: *device_config
        - $sku-id-val: 18
          $mic_config: "2mic"
          config: *device_config
        - $sku-id-val: 19
          $mic_config: "1mic"
          config: *device_config
        - $sku-id-val: 20
          $mic_config: "1mic"
          config: *device_config
    - $device-name: "sparky360"
      $fw-name: "Bobba"
      $mic_config: "2mic"
      skus:
        - $sku-id-val: 25
          config: *device_config
        - $sku-id-val: 26
          config: *device_config
    # This is a temporary model with SKU ID - 255 which is expected to be
    # provisioned with correct SKU ID in the factory flow. And HWID verification
    # will also catch the DUT still with 255 and report error.
    - $device-name: "unprovisioned_meep"
      skus:
        - $sku-id-val: 255
          $fw-name: "Meep"
          config: *unprovisioned_config
    - $device-name: "meep"
      $fw-name: "Meep"
      $ucm_src_root: "{{$device-name}}"
      $ucm_extra_suffix: "{{$device-name}}"
      skus:
        - $sku-id-val: 1
          $mic_config: "2mic"
          config: *device_config
        - $sku-id-val: 2
          $mic_config: "2mic"
          config: *device_config
        - $sku-id-val: 3
          $mic_config: "1mic"
          config: *device_config
    - $device-name: "mimrock"
      $fw-name: "Meep"
      $mic_config: "1mic"
      $ucm_src_root: "{{$device-name}}"
      $ucm_extra_suffix: "{{$device-name}}"
      $touchpad-wakeup: "1"
      skus:
        - $sku-id-val: 17
          config: *device_config
        - $sku-id-val: 18
          config: *device_config
    # This is a temporary model with SKU ID - 255 which is expected to be
    # provisioned with correct SKU ID in the factory flow. And HWID verification
    # will also catch the DUT still with 255 and report error.
    - $device-name: "unprovisioned_ampton"
      skus:
        - $sku-id-val: 255
          $fw-name: "Ampton"
          config: *unprovisioned_config
    - $device-name: "ampton"
      $fw-name: "Ampton"
      # TODO(OEM): need update later
      $mic_config: "2mic"
      $card: "glkrt5682max"
      $ucm_src_root: "{{$device-name}}"
      $ucm_extra_suffix: "{{$device-name}}"
      skus:
        - $sku-id-val: 1
          config: *device_config
        - $sku-id-val: 2
          config: *device_config
        - $sku-id-val: 3
          config: *device_config
        - $sku-id-val: 4
          config: *device_config
    - $device-name: "apel"
      $fw-name: "Ampton"
      # TODO(OEM): need update later
      $mic_config: "2mic"
      $card: "glkrt5682max"
      $ucm_src_root: "{{$device-name}}"
      $ucm_extra_suffix: "{{$device-name}}"
      skus:
        - $sku-id-val: 17
          config: *device_config
        - $sku-id-val: 18
          config: *device_config
        - $sku-id-val: 19
          config: *device_config
