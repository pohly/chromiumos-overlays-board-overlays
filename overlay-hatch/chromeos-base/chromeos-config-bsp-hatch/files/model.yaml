#
# Copyright 2019 The Chromium OS Authors. All rights reserved.
#
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

base_config: &base_config
  name: "{{$device-name}}"
  identity: &identity_common
    platform-name: "Hatch"
    smbios-name-match: "{{$fw-name}}"
    sku-id: "{{$sku-id}}"
  firmware:
    no-firmware: True
  firmware-signing: &firmware_signing_common
    key-id: "{{$key-id}}"
    signature-id: "{{$device-name}}"
  power: &power_common
    charging-ports: |
      CROS_USBPD_CHARGER0 LEFT
      CROS_USBPD_CHARGER1 RIGHT
    low-battery-shutdown-percent: "4.0"
    suspend-to-idle: "1"
    touchpad-wakeup: "1"
    has-keyboard-backlight: "1"
    has-ambient-light-sensor: "1"
    $internal-backlight-als-steps: |-
      80.0 55.0 -1 400
      100.0 80.0 100 -1
    internal-backlight-als-steps: "{{$internal-backlight-als-steps}}"
  hardware-properties:
    is-lid-convertible: True
    has-lid-accelerometer: True
    has-base-accelerometer: True
    has-base-gyroscope: True
    has-base-magnetometer: True
    has-fingerprint-sensor: True
    has-touchscreen: True
    stylus-category: "internal"
  camera:
    $camera-count: 1
    count: "{{$camera-count}}"

clamshell-config: &clamshell_config
  <<: *base_config
  hardware-properties:
    is-lid-convertible: False
    has-lid-accelerometer: False
    has-base-accelerometer: False
    has-base-gyroscope: False
    has-base-magnetometer: False
    has-fingerprint-sensor: False
    has-touchscreen: False
    stylus-category: "none"

clamshell-with-touchscreen-config: &clamshell_with_touchscreen_config
  <<: *base_config
  hardware-properties:
    is-lid-convertible: False
    has-lid-accelerometer: False
    has-base-accelerometer: False
    has-base-gyroscope: False
    has-base-magnetometer: False
    has-fingerprint-sensor: False
    has-touchscreen: True
    stylus-category: "none"

convertible-config: &convertible_config
  <<: *base_config
  hardware-properties:
    is-lid-convertible: True
    has-lid-accelerometer: True
    has-base-accelerometer: True
    has-base-gyroscope: True
    has-base-magnetometer: False
    has-fingerprint-sensor: False
    has-touchscreen: True
    stylus-category: "none"

convertible-with-internal-stylus-config: &convertible_with_internal_stylus_config
  <<: *base_config
  hardware-properties:
    is-lid-convertible: True
    has-lid-accelerometer: True
    has-base-accelerometer: True
    has-base-gyroscope: True
    has-base-magnetometer: False
    has-fingerprint-sensor: False
    has-touchscreen: True
    stylus-category: "internal"

chromeos:
  devices:
    - $device-name: "hatch"
      $fw-name: "Hatch"
      products:
        - $key-id: "HATCH"
      skus:
        - $sku-id: 255 # Unprovisioned
          config: *base_config
        - $sku-id: 1
          config: *base_config
    - $device-name: "unprovisioned_kohaku"
      $camera-count: 2
      $internal-backlight-als-steps: |-
        80.0 47.62 -1 400
        100.0 80.0 100 -1
      skus:
        - $sku-id: 255
          $fw-name: "Kohaku"
          $key-id: "HATCH"
          config: *base_config
    - $device-name: "kohaku"
      $fw-name: "Kohaku"
      products:
        - $key-id: "HATCH"
      $camera-count: 2
      $internal-backlight-als-steps: |-
        80.0 47.62 -1 400
        100.0 80.0 100 -1
      skus:
        - $sku-id: 1
          config: *convertible_with_internal_stylus_config
    - $device-name: "unprovisioned_kindred"
      skus:
        - $sku-id: 255
          $fw-name: "Kindred"
          $key-id: "HATCH"
          config: *base_config
    - $device-name: "kled"
      $fw-name: "Kindred"
      products:
        - $key-id: "HATCH"
      skus:
        - $sku-id: 1
          config: *convertible_config
        - $sku-id: 2
          config: *convertible_config
        - $sku-id: 3
          config: *convertible_config
        - $sku-id: 4
          config: *convertible_config
    - $device-name: "kindred"
      $fw-name: "Kindred"
      products:
        - $key-id: "HATCH"
      skus:
        - $sku-id: 21
          config: *clamshell_config
        - $sku-id: 22
          config: *clamshell_with_touchscreen_config
    - $device-name: "unprovisioned_helios"
      skus:
        - $sku-id: 255
          $fw-name: "Helios"
          $key-id: "HATCH"
          config: *base_config
    - $device-name: "helios"
      $fw-name: "Helios"
      products:
        - $key-id: "HATCH"
      skus:
        - $sku-id: 1
          # TODO(jschettler) Confirm stylus-category.
          config: *convertible_config
